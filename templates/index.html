<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Casino 7-24 VIP</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root { --pink: #ff00ff; --blue: #00ffff; --orange: #ff9100; --bg: #0d0d12; }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { background: var(--bg); color: #fff; font-family: 'Orbitron', sans-serif; height: 100vh; overflow: hidden; display: flex; flex-direction: column; }

        /* Sayfa DÃ¼zeni - Mesaj yazma alanÄ± ve butonlar iÃ§in altta 150px boÅŸluk bÄ±rakÄ±r */
        .page { display: none; flex: 1; flex-direction: column; padding: 10px; height: calc(100vh - 150px); }
        .page.active { display: flex; }

        /* Neon Panel */
        .neon-container { flex: 1; border: 2px solid var(--pink); border-radius: 25px; box-shadow: 0 0 15px rgba(255,0,255,0.2); display: flex; flex-direction: column; background: rgba(0,0,0,0.8); overflow: hidden; }
        .header { padding: 12px; text-align: center; color: var(--pink); border-bottom: 1px solid #222; text-shadow: 0 0 5px var(--pink); font-size: 0.85rem; }
        .chat-box { flex: 1; overflow-y: auto; padding: 12px; display: flex; flex-direction: column; gap: 8px; }

        /* Mesaj BalonlarÄ± */
        .msg { background: rgba(255,255,255,0.07); padding: 10px; border-radius: 12px; border-left: 3px solid var(--orange); font-size: 0.8rem; }
        .msg b { color: var(--orange); }

        /* --- BURASI Ã–NEMLÄ°: MESAJ YAZMA ALANI --- */
        /* ButonlarÄ±n hemen Ã¼zerinde sabit kalmasÄ± iÃ§in 85px yukarÄ±da konumlandÄ± */
        .fixed-input-container { 
            position: fixed; 
            bottom: 85px; 
            left: 0; 
            width: 100%; 
            padding: 10px; 
            background: #000; 
            border-top: 1px solid #222; 
            display: flex; 
            gap: 8px; 
            z-index: 1001; 
        }
        input { flex: 1; background: transparent; border: 1px solid var(--blue); color: #fff; padding: 12px; border-radius: 20px; outline: none; font-family: 'Orbitron'; font-size: 0.8rem; }
        .send-btn { background: var(--orange); border: none; padding: 0 20px; border-radius: 20px; font-weight: bold; cursor: pointer; color: #000; box-shadow: 0 0 10px var(--orange); }

        /* --- ALT NAVÄ°GASYON --- */
        nav { position: fixed; bottom: 0; left: 0; width: 100%; height: 85px; background: #050507; display: flex; justify-content: space-around; align-items: center; padding: 0 10px 10px 10px; border-top: 1px solid #222; z-index: 1000; }
        nav button { width: 30%; height: 45px; border-radius: 18px; border: 2px solid; background: transparent; font-family: 'Orbitron'; font-weight: bold; font-size: 0.7rem; transition: 0.3s; }
        
        .btn-users { color: var(--pink); border-color: var(--pink); }
        .btn-lobby { color: #fff; border-color: var(--pink); background: var(--pink); box-shadow: 0 0 15px var(--pink); }
        .btn-private { color: var(--blue); border-color: var(--blue); }

        .u-item { padding: 15px; border-bottom: 1px solid #222; color: var(--blue); font-size: 0.9rem; }
    </style>
</head>
<body>

    <div id="p-users" class="page">
        <div class="neon-container">
            <div class="header">ğŸ‘¤ AKTÄ°F ÃœYELER</div>
            <div id="u-list" class="chat-box"></div>
        </div>
    </div>

    <div id="p-lobby" class="page active">
        <div class="neon-container">
            <div class="header">ğŸŒ GENEL LOBÄ°</div>
            <div id="lobby-msgs" class="chat-box"></div>
        </div>
        <div class="fixed-input-container">
            <input type="text" id="m-inp" placeholder="Mesaj yazÄ±n...">
            <button class="send-btn" onclick="send()">GÃ–NDER</button>
        </div>
    </div>

    <div id="p-private" class="page">
        <div class="neon-container" style="border-color: var(--blue); box-shadow: 0 0 15px rgba(0,255,255,0.2);">
            <div class="header" style="color: var(--blue);">ğŸ”’ Ã–ZEL SOHBET</div>
            <div id="private-msgs" class="chat-box"></div>
        </div>
    </div>

    <nav>
        <button class="btn-users" onclick="show('p-users', this)">ÃœYELER</button>
        <button class="btn-lobby" onclick="show('p-lobby', this)">LOBÄ°</button>
        <button class="btn-private" onclick="show('p-private', this)">Ã–ZEL</button>
    </nav>

    <script>
        const socket = io();
        let target = "global";
        let user = prompt("Ä°sminiz:");
        if(user) socket.emit('register', user);

        function show(id, btn) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            
            // Lobi dÄ±ÅŸÄ±nda giriÅŸ kutusunu gizle
            document.querySelector('.fixed-input-container').style.display = (id === 'p-lobby') ? 'flex' : 'none';

            // Buton efektleri
            document.querySelectorAll('nav button').forEach(b => {
                b.style.background = "transparent";
                b.style.color = b.classList.contains('btn-users') ? "var(--pink)" : (b.classList.contains('btn-lobby') ? "#fff" : "var(--blue)");
            });
            btn.style.background = (id === 'p-private') ? "var(--blue)" : "var(--pink)";
            btn.style.color = "#000";
        }

        document.getElementById('m-inp').addEventListener('keypress', e => { if(e.key === 'Enter') send(); });

        function send() {
            const inp = document.getElementById('m-inp');
            if(!inp.value.trim()) return;
            socket.emit('send_msg', {target: target, msg: inp.value});
            inp.value = "";
        }

        socket.on('receive_msg', data => {
            const area = data.target === 'global' ? 'lobby-msgs' : 'private-msgs';
            document.getElementById(area).innerHTML += `<div class="msg"><b>${data.sender}:</b> ${data.msg}</div>`;
            document.getElementById(area).scrollTop = 999999;
        });

        socket.on('update_users', list => {
            const div = document.getElementById('u-list');
            div.innerHTML = "";
            list.forEach(u => {
                if(u.name !== user) div.innerHTML += `<div class="u-item" onclick="setT('${u.name}')">ğŸ‘¤ ${u.name}</div>`;
            });
        });

        function setT(n) {
            target = n;
            alert(n + " ile Ã¶zel sohbet seÃ§ildi.");
            show('p-lobby', document.querySelector('.btn-lobby'));
        }
    </script>
</body>
</html>
