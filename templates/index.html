<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Casino 7-24 | Profesyonel Sohbet</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>
    <style>
        :root { --main-orange: #ff4500; --bg-dark: #121212; --panel-bg: #1e1e1e; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg-dark); color: white; margin: 0; display: flex; height: 100vh; overflow: hidden; }
        
        /* Sol Panel - √úyeler */
        #side-panel { width: 260px; background: var(--panel-bg); border-right: 1px solid #333; display: flex; flex-direction: column; }
        .panel-header { padding: 20px; border-bottom: 1px solid #333; color: var(--main-orange); font-weight: bold; }
        .user-list { flex: 1; overflow-y: auto; }
        .user-item { padding: 12px 20px; cursor: pointer; border-bottom: 1px solid #252525; display: flex; justify-content: space-between; }
        .user-item:hover { background: #252525; }

        /* Orta Alan - Sohbet */
        #main-chat { flex: 1; display: flex; flex-direction: column; }
        .chat-header { padding: 15px; background: #1a1a1a; border-bottom: 1px solid #333; display: flex; justify-content: space-between; }
        #messages { flex: 1; padding: 20px; overflow-y: auto; display: flex; flex-direction: column; gap: 10px; }
        
        /* Mesaj Kutusu ve Butonlar */
        .input-area { padding: 20px; background: #1a1a1a; display: flex; gap: 10px; }
        input { flex: 1; padding: 12px; border-radius: 8px; border: 1px solid #444; background: #252525; color: white; font-size: 16px; }
        button { padding: 10px 20px; border-radius: 8px; border: none; background: var(--main-orange); color: white; font-weight: bold; cursor: pointer; }

        /* Mobil Uyumluluk */
        @media (max-width: 768px) {
            #side-panel { width: 80px; }
            .user-item span { display: none; }
        }
    </style>
</head>
<body>
    <div id="side-panel">
        <div class="panel-header">üé∞ Casino 7-24</div>
        <div class="user-list" id="user-list">
            <div class="user-item" onclick="setTarget('global')">üåç Genel Lobi</div>
            </div>
    </div>

    <div id="main-chat">
        <div class="chat-header">
            <span id="chat-title">üåç Genel Sohbet</span>
            <button onclick="showAdmin()" style="background: #333; font-size: 12px;">Admin Paneli</button>
        </div>
        
        <div id="messages"></div>

        <div class="input-area">
            <input type="text" id="msg-input" placeholder="Mesajƒ±nƒ±zƒ± yazƒ±n...">
            <button id="send-btn" onclick="sendMessage()">G√ñNDER</button>
        </div>
    </div>

    <script>
        const socket = io();
        let currentTarget = "global";
        let myName = prompt("Kullanƒ±cƒ± Adƒ±nƒ±z:"); // √úyelik sistemi aktifle≈üene kadar ge√ßici

        // MOBƒ∞L VE Bƒ∞LGƒ∞SAYAR ƒ∞√áƒ∞N MESAJ G√ñNDERME TETƒ∞KLERƒ∞
        const msgInput = document.getElementById('msg-input');

        // 1. Bilgisayar: Enter Tu≈üu
        msgInput.addEventListener('keypress', function (e) {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });

        // 2. Telefon/Bilgisayar: G√∂nder Butonu (onclick zaten tanƒ±mlƒ±)

        function sendMessage() {
            const msg = msgInput.value.trim();
            if (!msg) return;

            if (currentTarget === "global") {
                socket.emit('send_global_msg', {user: myName, msg: msg});
            } else {
                socket.emit('send_private_msg', {sender: myName, target: currentTarget, msg: msg});
            }
            msgInput.value = "";
        }

        socket.on('receive_msg', (data) => {
            const msgDiv = document.getElementById('messages');
            const color = data.type === 'global' ? '#fff' : var(--main-orange);
            msgDiv.innerHTML += `<div><b style="color:var(--main-orange)">${data.sender}:</b> ${data.msg}</div>`;
            msgDiv.scrollTop = msgDiv.scrollHeight;
        });

        function setTarget(t) {
            currentTarget = t;
            document.getElementById('chat-title').innerText = t === 'global' ? 'üåç Genel Sohbet' : 'üë§ √ñzel: ' + t;
        }
    </script>
</body>
</html>
