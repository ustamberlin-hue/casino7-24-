<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Casino 7-24 VIP</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root { --pink: #ff00ff; --blue: #00ffff; --orange: #ff9100; --bg: #0d0d12; }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { background: var(--bg); color: #fff; font-family: 'Orbitron', sans-serif; height: 100vh; display: flex; flex-direction: column; overflow: hidden; }

        /* Sayfa D√ºzeni */
        .page { display: none; flex: 1; flex-direction: column; padding: 10px; padding-bottom: 85px; height: 100%; }
        .page.active { display: flex; }

        /* Neon Panel */
        .neon-container { flex: 1; border: 2px solid var(--pink); border-radius: 20px; box-shadow: 0 0 15px rgba(255,0,255,0.2); display: flex; flex-direction: column; background: rgba(0,0,0,0.7); overflow: hidden; }
        .header { padding: 12px; text-align: center; font-size: 1rem; color: var(--pink); border-bottom: 1px solid #222; text-shadow: 0 0 5px var(--pink); }
        .chat-box { flex: 1; overflow-y: auto; padding: 10px; display: flex; flex-direction: column; gap: 10px; }

        /* Mesaj Balonlarƒ± */
        .msg { background: rgba(255,255,255,0.05); padding: 10px; border-radius: 12px; border-left: 3px solid var(--orange); font-size: 0.9rem; line-height: 1.4; }
        .msg b { color: var(--orange); }

        /* Giri≈ü Alanƒ± (Butonlarƒ±n √úst√ºnde Kalacak ≈ûekilde) */
        .input-area { padding: 10px; display: flex; gap: 8px; border-top: 1px solid #222; background: #000; }
        input { flex: 1; background: transparent; border: 1px solid var(--blue); color: #fff; padding: 10px; border-radius: 15px; outline: none; font-family: 'Orbitron'; font-size: 0.8rem; }
        .send-btn { background: var(--orange); border: none; padding: 0 15px; border-radius: 15px; font-weight: bold; cursor: pointer; box-shadow: 0 0 10px var(--orange); }

        /* Alt Men√º (G√∂rseldeki Gibi Sabit) */
        nav { position: fixed; bottom: 0; left: 0; width: 100%; height: 75px; background: #08080a; display: flex; justify-content: space-around; align-items: center; padding: 0 10px; border-top: 1px solid #222; z-index: 1000; }
        nav button { width: 30%; height: 45px; border-radius: 15px; border: 2px solid; background: transparent; font-family: 'Orbitron'; font-weight: bold; font-size: 0.7rem; transition: 0.3s; }
        
        .btn-users { color: var(--pink); border-color: var(--pink); }
        .btn-lobby { color: #fff; border-color: var(--pink); background: var(--pink); box-shadow: 0 0 15px var(--pink); }
        .btn-private { color: var(--blue); border-color: var(--blue); }

        .u-item { padding: 12px; border-bottom: 1px solid #222; color: var(--blue); }
    </style>
</head>
<body>

    <div id="p-users" class="page">
        <div class="neon-container">
            <div class="header">üë§ AKTƒ∞F √úYELER</div>
            <div id="u-list" class="chat-box"></div>
        </div>
    </div>

    <div id="p-lobby" class="page active">
        <div class="neon-container">
            <div class="header">üåç GENEL LOBƒ∞</div>
            <div id="lobby-msgs" class="chat-box"></div>
            <div class="input-area">
                <input type="text" id="m-inp" placeholder="Mesaj yazƒ±n...">
                <button class="send-btn" onclick="send()">G√ñNDER</button>
            </div>
        </div>
    </div>

    <div id="p-private" class="page">
        <div class="neon-container" style="border-color: var(--blue);">
            <div class="header" style="color: var(--blue);">üîí √ñZEL SOHBET</div>
            <div id="private-msgs" class="chat-box"></div>
        </div>
    </div>

    <nav>
        <button class="btn-users" onclick="show('p-users')">√úYELER</button>
        <button class="btn-lobby" onclick="show('p-lobby')">LOBƒ∞</button>
        <button class="btn-private" onclick="show('p-private')">√ñZEL</button>
    </nav>

    <script>
        const socket = io();
        let target = "global";
        let user = prompt("ƒ∞sim:");
        if(user) socket.emit('register', user);

        function show(id) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById(id).classList.add('active');
        }

        document.getElementById('m-inp').addEventListener('keypress', e => { if(e.key === 'Enter') send(); });

        function send() {
            const inp = document.getElementById('m-inp');
            if(!inp.value.trim()) return;
            socket.emit('send_msg', {target: target, msg: inp.value});
            inp.value = "";
        }

        socket.on('receive_msg', data => {
            const area = data.target === 'global' ? 'lobby-msgs' : 'private-msgs';
            const cont = document.getElementById(area);
            cont.innerHTML += `<div class="msg"><b>${data.sender}:</b> ${data.msg}</div>`;
            cont.scrollTop = cont.scrollHeight;
        });

        socket.on('update_users', list => {
            const div = document.getElementById('u-list');
            div.innerHTML = "";
            list.forEach(u => {
                if(u.name !== user) div.innerHTML += `<div class="u-item" onclick="setT('${u.name}')">üë§ ${u.name}</div>`;
            });
        });

        function setT(n) {
            target = n;
            alert(n + " ile √∂zel sohbet se√ßildi.");
            show('p-lobby');
        }
    </script>
</body>
</html>
